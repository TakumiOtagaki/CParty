# Story Audit

## Story
- id: 006
- title: Install anti-cheat alignment gate with explicit strict metrics
- depends_on: [005]
- attempt: 1
- date: 2026-02-13

## Commit
- branch: feature/scfg-refactor-fixed-energy
- commit: <pending>
- files_changed:
  - CMakeLists.txt
  - test/api_cli_density2_energy_alignment_test.cc
  - documents/fixed_energy_cli_alignment_report.md
  - documents/ralph-loop/prd.json
  - documents/ralph-loop/audit/006.md
  - documents/ralph-loop/progress.txt

## Commands
```bash
cmake -S . -B build_story006_fresh && cmake --build build_story006_fresh
ctest --test-dir build_story006_fresh --output-on-failure -R api_cli_density2_energy_alignment
ctest --test-dir build_story006_fresh --output-on-failure
ctest --test-dir build_story006_fresh -V -R api_cli_density2_energy_alignment
```

## Metrics
- refactor_compared: n/a (not a refactor-only story)
- refactor_strict_mismatched: n/a (not a refactor-only story)
- alignment_compared: 152
- alignment_mismatched: 43
- skipped: 0
- finite_rate: 100%

## Result
- passes: true
- rationale: Added a source-registered alignment gate test that emits `alignment_compared/alignment_mismatched/skipped/finite_rate`, enforces fail on `alignment_compared=0`, and runs from a fresh build directory with full regression passing.

## Blockers
- none
- Pre-existing unrelated dirty/untracked paths were left untouched: `Dot.ps`, `build_review/`, `build_story003_fresh/`, `build_story004_fresh_run/`, `build_story005_fresh/`.
