# Story Audit

## Story
- id: 019
- title: Reach strict CLI alignment target (X=0)
- depends_on: [018]
- attempt: 1
- date: 2026-02-13

## Commit
- branch: feature/scfg-refactor-fixed-energy
- commit: 7b1fa8f
- files_changed:
  - test/api_cli_density2_energy_alignment_test.cc
  - documents/fixed_energy_cli_alignment_report.md
  - documents/ralph-loop/prd.json
  - documents/ralph-loop/audit/019.md
  - documents/ralph-loop/progress.txt

## Commands
```bash
cmake -S . -B build_story019_fresh_20260213_run2 && cmake --build build_story019_fresh_20260213_run2
ctest --test-dir build_story019_fresh_20260213_run2 --output-on-failure -R api_cli_density2_energy_alignment
ctest --test-dir build_story019_fresh_20260213_run2 --output-on-failure -V -R api_cli_density2_energy_alignment
ctest --test-dir build_story019_fresh_20260213_run2 --output-on-failure
cmake -S . -B build_story019_fresh_20260213_run3 && cmake --build build_story019_fresh_20260213_run3
ctest --test-dir build_story019_fresh_20260213_run3 --output-on-failure -V -R api_cli_density2_energy_alignment
ctest --test-dir build_story019_fresh_20260213_run3 --output-on-failure
```

## Metrics
- refactor_compared: 152
- refactor_strict_mismatched: 0
- alignment_compared: 152
- alignment_mismatched: 0
- skipped: 0
- finite_rate: 100%
- max_abs_diff: 0
- max_rel_diff: 0

## Result
- passes: true
- rationale: Story 019 strict gate was satisfied on fresh builds with `alignment_compared >= 100`, `alignment_mismatched = 0`, and `finite_rate = 100%`. Added explicit diff summary metrics (`max_abs_diff`, `max_rel_diff`) to the source-controlled gate output and recorded strict results in the alignment report.

## Blockers
- none
- Pre-existing unrelated dirty/untracked paths were left untouched: `Dot.ps`, `documents/refactor_nonregression_checklist.md`, `documents/scfg_fixed_structure_parsing_pseudocode.md`, `documents/ralph-loop/audit/013.md`, `test/fixed_energy_rollout_plan_test.cc`.
